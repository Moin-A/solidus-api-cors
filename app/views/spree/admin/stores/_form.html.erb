<div class="row">
  <div class="col-12 col-md-6">
    <%= f.field_container :name do %>
      <%= f.label :name, class: 'required' %>
      <%= f.text_field :name, required: true, class: 'fullwidth' %>
      <%= f.error_message_on :name %>
    <% end %>

    <%= f.field_container :code do %>
      <%= f.label :code, class: 'required' %>
      <%= f.field_hint :code %>
      <%= f.text_field :code, required: true, class: 'fullwidth' %>
      <%= f.error_message_on :code %>
    <% end %>

    <%= f.field_container :seo_title do %>
      <%= f.label :seo_title %>
      <%= f.text_field :seo_title, class: 'fullwidth' %>
      <%= f.error_message_on :seo_title %>
    <% end %>

    <%= f.field_container :meta_keywords do %>
      <%= f.label :meta_keywords %>
      <%= f.text_field :meta_keywords, class: 'fullwidth' %>
      <%= f.error_message_on :meta_keywords %>
    <% end %>

    <%= f.field_container :meta_description do %>
      <%= f.label :meta_description %>
      <%= f.text_area :meta_description, class: 'fullwidth' %>
      <%= f.error_message_on :meta_description %>
    <% end %>

    <!-- NEW HERO IMAGE SECTION -->
    <div class="field">
      <%= f.label :hero_image, "Hero Image" %>
      <span class="info">Upload a hero image for your store homepage. Recommended size: 1920x600px. Max file size: 5MB.</span>
      <%= f.file_field :hero_image, 
          class: 'fullwidth', 
          accept: 'image/*',
          id: 'hero_image_upload' %>
      <% if @store.errors[:hero_image].any? %>
        <span class="formError"><%= @store.errors[:hero_image].first %></span>
      <% end %>
      
      <!-- Show current hero image if exists -->
      <% if @store.hero_image.attached? %>

        <div class="current-hero-image" style="margin-top: 10px;">
          <label style="font-weight: bold;">Current Hero Image:</label>
          <div class="hero-preview" style="max-width: 300px; margin-top: 5px;">
            <%= image_tag @store.hero_image.url, 
                style: "width: 100%; height: auto; border: 1px solid #ddd; border-radius: 4px;" %>
          </div>
          
          <div style="margin-top: 10px;">
            <%= f.check_box :remove_hero_image, style: 'margin-right: 5px;' %>
            <%= f.label :remove_hero_image, "Remove current hero image", style: 'font-weight: normal;' %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
  
  <div class="col-12 col-md-6">
    <%= f.field_container :url do %>
      <%= f.label :url, class: 'required' %>
      <%= f.text_field :url, required: true, class: 'fullwidth' %>
      <%= f.error_message_on :url %>
    <% end %>

    <%= f.field_container :mail_from_address do %>
      <%= f.label :mail_from_address, class: 'required' %>
      <%= f.text_field :mail_from_address, required: true, class: 'fullwidth' %>
      <%= f.error_message_on :mail_from_address %>
    <% end %>

    <%= f.field_container :bcc_email do %>
      <%= f.label :bcc_email %>
      <%= f.text_field :bcc_email, class: 'fullwidth' %>
      <%= f.error_message_on :bcc_email %>
    <% end %>

    <%= f.field_container :default_currency do %>
      <%= f.label :default_currency %>
      <%= f.field_hint :default_currency %>
      <%= f.select :default_currency,
        Spree::Config.available_currencies.map(&:iso_code),
        { include_blank: true },
        { class: 'custom-select fullwidth' } %>
      <%= f.error_message_on :default_currency %>
    <% end %>

    <%= f.field_container :cart_tax_country_iso do %>
      <%= f.label :cart_tax_country_iso %>
      <%= f.field_hint :cart_tax_country_iso %>
      <%= f.collection_select :cart_tax_country_iso,
        available_countries(restrict_to_zone: nil), :iso, :name,
        { include_blank: t(".no_cart_tax_country") },
        { class: "custom-select fullwidth" } %>
      <%= f.error_message_on :cart_tax_country_iso %>
    <% end %>

    <%= f.field_container :available_locales do %>
      <%= f.label :available_locales %>
      <%= f.field_hint :available_locales %>
      <%= f.select :available_locales,
        Spree.i18n_available_locales.map { |locale|
          [I18n.t('spree.i18n.this_file_language', locale: locale, default: locale.to_s, fallback: false), locale]
        }.sort,
        { },
        { class: 'select2 fullwidth', multiple: true } %>
      <%= f.error_message_on :default_currency %>
    <% end %>
  </div>
</div>

<!-- Image Preview JavaScript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const heroImageInput = document.getElementById('hero_image_upload');
  
  if (heroImageInput) {
    heroImageInput.addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (file) {
        // Validate file size (5MB limit)
        if (file.size > 5 * 1024 * 1024) {
          alert('File size must be less than 5MB');
          this.value = '';
          return;
        }
        
        // Validate file type
        if (!file.type.match('image.*')) {
          alert('Please select an image file');
          this.value = '';
          return;
        }
        
        const reader = new FileReader();
        reader.onload = function(e) {
          // Remove existing preview
          const existingPreview = document.querySelector('.new-hero-preview');
          if (existingPreview) {
            existingPreview.remove();
          }
          
          // Create new preview
          const previewDiv = document.createElement('div');
          previewDiv.className = 'new-hero-preview';
          previewDiv.style.marginTop = '10px';
          previewDiv.innerHTML = `
            <label style="font-weight: bold;">New Hero Image Preview:</label>
            <div style="max-width: 300px; margin-top: 5px;">
              <img src="${e.target.result}" style="width: 100%; height: auto; border: 1px solid #ddd; border-radius: 4px;">
            </div>
          `;
          
          heroImageInput.parentNode.appendChild(previewDiv);
        };
        reader.readAsDataURL(file);
      }
    });
  }
});
</script>